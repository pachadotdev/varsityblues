%----------------------------------------------%
%       Fonts                                  %
%----------------------------------------------%

%	Font for defined terms in text
\newcommand{\dfn}[1]{{\boldmath\bfseries #1}}
\newcommand{\idf}[1]{{\boldmath\bfseries #1\index{#1}}}

%----------------------------------------------%
%       Mathematical symbols                   %
%----------------------------------------------%

%	Common sets of numbers
\newcommand{\R}{\mathbb R}	    % real numbers
\newcommand{\eR}{\R^{\sharp}}		% extended reals
\newcommand{\Q}{\mathbb Q}      % rational numbers
\newcommand{\N}{\mathbb N}			% natural numbers
\newcommand{\Nz}{\N \cup \{0\}}	% natural numbers + 0
\newcommand{\Z}{\mathbb Z}			% integers
\newcommand{\Cx}{\mathbb C}			% complex numbers

%	Euclidean spaces e.g., \Rm or \Rm[+1]
\newcommand{\Rk}[1][]{\ensuremath{\R^{\dmn{k}#1}}}
\newcommand{\Rl}[1][]{\ensuremath{\R^{\ell#1}}}
\newcommand{\Rm}[1][]{\ensuremath{\R^{\dmn{m}#1}}}
\newcommand{\Rn}[1][]{\ensuremath{\R^{\dmn{n}#1}}}
\newcommand{\Rp}[1][]{\ensuremath{\R^{\dmn{p}#1}}}

\newcommand{\Qm}[1][]{\ensuremath{\Q^{\dmn{m}#1}}}
\newcommand{\Qn}[1][]{\ensuremath{\Q^{\dmn{n}#1}}}
\newcommand{\Zm}[1][]{\ensuremath{\Z^{\dmn{m}#1}}}
\newcommand{\Zn}[1][]{\ensuremath{\Z^{\dmn{n}#1}}}

%	Inverse image or event:
\newcommand{\ev}[1]{\ensuremath{\left\{\protect\mathstrut #1\right\}}}
% The math strut needs to protected in case it's used in a \caption command.  I don't know why.

%	Set Theory
\renewcommand{\emptyset}{\varnothing}
\newcommand{\superset}{\supset}
\newcommand{\union}{\cup}
\newcommand{\inter}{\cap}
% slighty larger \textstyle:
\newcommand{\tcap}{\mathop{\text{\large$\textstyle\bigcap$}}\limits}
\newcommand{\tcup}{\mathop{\text{\large$\textstyle\bigcup$}}\limits}

%	Topology
\newcommand{\cl}[1]{\overline{#1}}		% closure
\DeclareMathOperator{\itr}{int}		% interior
\DeclareMathOperator{\clo}{cl}
\DeclareMathOperator{\diam}{diam}
\newcommand{\Gdelta}{G_\delta}
\newcommand{\Fsigma}{F_\sigma}
\newcommand{\Hd}{{\Cursive h}}		% Hausdorff distance
\newcommand{\weakstar}{\text{weak\raisebox{-.4ex}{*}}\xspace}

%	Norm and absolute value
\newlength{\@normbarht}
\newlength{\@normarght}

\newcommand{\norm}[1]{\setbox0\vbox{\ensuremath{#1}}
\setlength{\@normarght}{\ht0}
\setbox0\vbox{\ensuremath{\Vert}}
\setlength{\@normbarht}{\ht0}
\ifthenelse{\lengthtest{1.1\@normbarht>\@normarght}}{\lVert#1\rVert}{\left\lVert#1\right\rVert}}

\newcommand{\abs}[1]{\setbox0\vbox{\ensuremath{#1}}
\setlength{\@normarght}{\ht0}
\setbox0\vbox{\ensuremath{\vert}}
\setlength{\@normbarht}{\ht0}
\ifthenelse{\lengthtest{1.1\@normbarht>\@normarght}}{\lvert#1\rvert}{\left\lvert#1\right\rvert}}

%	Convexity
% \kc xy\lambda = (1-\lambda)x+\lambda y
\newcommand{\kc}[3]{(1-{#3}){#1}+{#3}{#2}}
% \kcd xy\lambda = x+\lambda(y-x)
\newcommand{\kcd}[3]{{#1}+{#3}({#2}-{#1})}
% \kcp xy\lambda = \bigl((1-\lambda)x+\lambda y\bigr)
\newcommand{\kcp}[3]{\bigl(\kc{#1}{#2}{#3}\bigr)}

% \kcf fxy\lambda = f\bigl((1-\lambda)x+\lambda y\bigr)
\newcommand{\kcf}[4]{{#1}\bigl(\kc{#2}{#3}{#4}\bigr)}
% \kcfd fxy\lambda = f\bigl(x+\lambda(y-x)\bigr)
\newcommand{\kcfd}[4]{{#1}\bigl(\kcd{#2}{#3}{#4}\bigr)}

\DeclareMathOperator{\co}{co}	% convex hull
\DeclareMathOperator{\cone}{cone}	% conical hull
\newcommand{\ray}[1]{\langle#1\rangle} 	% ray
\DeclareMathOperator{\cco}{\cl{\operatorname{co}}}
\DeclareMathOperator{\aff}{aff}
\DeclareMathOperator{\cor}{cor}
\DeclareMathOperator{\icr}{icr}
\DeclareMathOperator{\ri}{ri}
\newcommand{\extr}[1]{E(#1)}		% extreme points

\def\seq{\{x_n\}_{n\in\N}} % sequence
\newcommand{\sseq}{\{x_{n_k}\}_{k\in\N}} % double sequence
\newcommand{\adh}[1]{\text{adh}({#1})} % adherence
\newcommand{\inte}[1]{\text{int}({#1})} % interior
\newcommand{\fr}[1]{\text{fr}({#1})} % frrontier

%	Functions and correspondences
\providecommand{\too}{\twoheadrightarrow}
\providecommand{\mapstoo}{\mathrel{\mapstochar\too}}
\providecommand{\mapstoto}{\mapstoo}
\DeclareMathOperator{\Gr}{gr}
\newcommand{\inv}{^{-1}}			% inverse
\newcommand{\upinv}{^{\text{u}}}
\newcommand{\lowinv}{^{\ell}}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\epi}{epi}
\DeclareMathOperator{\hypo}{hypo}
% point on a graph \gpt xf = (x,f(x))
\newcommand{\gpt}[2]{\bigl(#1,#2(#1)\bigr)}

%	Linear Algebra
\DeclareMathOperator{\Span}{span}
\DeclareMathOperator{\Range}{range}
\DeclareMathOperator{\NullSpace}{null\ space}
\DeclareMathOperator{\Rank}{rank}
\DeclareMathOperator{\Trace}{tr}
\newcommand{\Nullity}{nullity}
\newcommand{\Mat}[1]{\Cursive{M}(#1)}
\newcommand{\Lin}[2]{\Cursive{L}(#1,#2)}

% Derivatives in general
\def\fn1{f:A\subseteq\R^n\to\R}
\def\fnm{f:A\subseteq\R^n\to\R^m}
\def\gn1{g:A\subseteq\R^n\to\R}
\def\gnm{g:A\subseteq\R^n\to\R^m}
\def\fgn1{f,g:A\subseteq\R^n\to\R}
\def\fgnm{f,g:A\subseteq\R^n\to\R^m}
\def\dfx{\frac{\partial f}{\partial x}}
\def\dfy{\frac{\partial f}{\partial y}}
\def\dfi{\frac{\partial f}{\partial x_i}}
\def\dfj{\frac{\partial f}{\partial x_j}}
\def\dFx{\frac{\partial F}{\partial x}}
\def\dFy{\frac{\partial F}{\partial y}}
\def\dFi{\frac{\partial F}{\partial x_i}}
\def\dFj{\frac{\partial F}{\partial x_j}}
\def\dgx{\frac{\partial g}{\partial x}}
\def\dgy{\frac{\partial g}{\partial y}}
\def\dgi{\frac{\partial g}{\partial x_i}}
\def\dgj{\frac{\partial g}{\partial x_j}}
\def\ddfyx{\frac{\partial^2 f}{\partial y\partial x}}
\def\ddfxy{\frac{\partial^2 f}{\partial x\partial y}}
\def\ddfx{\frac{\partial^2 f}{\partial x^2}}
\def\ddfy{\frac{\partial^2 f}{\partial y^2}}
\def\ddfij{\frac{\partial^2 f}{\partial x_j\partial x_i}}
\def\ddfji{\frac{\partial^2 f}{\partial x_i\partial x_j}}
\def\dfij{\frac{\partial f_i}{\partial x_j}}
\newcommand{\prd}[2]{\frac{\partial #1}{\partial #2}}

%---------------------%
% Statistics notation %
%---------------------%

\renewcommand{\vec}[1]{\boldsymbol{#1}} % bold vectors
\newcommand{\vx}{\vec{x}} % x vector
\newcommand{\vy}{\vec{y}} % y vector
\newcommand{\vb}{\vec{\beta}} % y vector
\newcommand{\ve}{\vec{\varepsilon}} % y vector

\newcommand{\cov}{\text{cov}}
\newcommand{\plim}{\text{plim}\:}
\newcommand{\avar}{\text{avar}}

\newcommand{\siga}{$\sigma$-algebra\:} % sigma algebra
\newcommand{\sigf}{$\sigma$-field\:} % sigma field
\newcommand{\mulprod}{\times \ldots \times} % sigma algebra
\newcommand{\A}{\mathcal A} % algebra
\renewcommand{\S}{\mathcal S} % semi-algebra
\newcommand{\F}{\mathcal F} % sigma field
\newcommand{\C}{\mathcal C} % collection
\renewcommand{\S}{\mathcal S} % semialgebra
\newcommand{\BR}{\mathcal R} % collection

\renewcommand{\P}{\mathbb P} % Probability
\renewcommand{\Pr}{\mathcal P} % Probability space
\newcommand{\prob}[1]{\ensuremath{\def\@temp{#1}\ifx\@temp\@empty \Pr\else \Pr(#1)\fi}} % Set of probability measures: \prob or \prob{X}
\newcommand{\E}{\mathbb E} % Expectation
\newcommand{\var}{\text{var}} % Variance
\newcommand{\thetah}{\hat{\theta}} % theta hat
\newcommand{\thetat}{\tilde{\theta}} % theta hat
\newcommand{\distconv}{\xrightarrow[]{d}} % convergence in distribution
\newcommand{\probconv}{\xrightarrow[]{p}} % convergence in probability
\newcommand{\infunion}{\bigcup_{i=1}^{\infty}}
\newcommand{\infintersection}{\bigcap_{i=1}^{\infty}}
\renewcommand{\union}[2]{\bigcup_{#1}^{#2}}
\newcommand{\intersection}[2]{\bigcap_{#1}^{#2}}
\newcommand{\normalstd}{\mathcal{N}(0,1)}
\newcommand{\normal}[2]{\mathcal{N}({#1},{#2})}
\newcommand{\mespace}{(\Omega, \F)}
\newcommand{\prspace}{(\Omega, \F, \P)}

\newcommand{\sumi}{\sum_{i = 1}^n}
\newcommand{\sumj}{\sum_{j = 1}^n}
\newcommand{\sumik}{\sum_{i = 1}^k}
\newcommand{\sumim}{\sum_{i = 1}^m}

%	Vector orders and binary relations
\newcommand{\vgeq}{\geqq}
\newcommand{\vleq}{\leqq}
\newcommand{\vgg}{\gg}
\newcommand{\vll}{\ll}
\providecommand{\sgeq}{>}
\providecommand{\sleq}{<}
\let\ogeq\geq
\let\oleq\leq
\renewcommand{\geq}{\geqslant}
\renewcommand{\leq}{\leqslant}

%	Preference relations
\newcommand{\pref}{\ensuremath{\mathrel{\succcurlyeq}}}	% preference
\newcommand{\rpref}
	{\ensuremath{\mathrel{\preccurlyeq}}} % reversed preference
\newcommand{\spref}{\ensuremath{\mathrel{\succ}}} % strict preference
\newcommand{\indiff}{\ensuremath{\mathrel{\sim}}} % indifference

%	Miscellany
\let\by\times	     % synonym for n\by m matrices
\DeclareMathOperator{\sgn}{sgn}
\newcommand{\one}{\ensuremath{\boldsymbol{1}}}
\DeclareMathOperator*{\maximize}{maximize}
\DeclareMathOperator*{\minimize}{minimize}

\newcommand{\mathword}[1]{\mathop{\text{#1}}}

% Does not imply
\newlength{\notwd}
\newlength{\implieswd}
\settowidth{\notwd}{$\not$}
\settowidth{\implieswd}{$\implies$}
\newcommand{\nimplies}{{\mbox{$\kern.3\implieswd\not\kern-\notwd\kern-.3\implieswd\implies$}}}

%  Make indices more compact:
\newcommand{\minus}{\mathord{-}}%% for n-1, etc.
\newcommand{\plus}{\mathord{+}}%% for n+1, etc.

\newcommand{\stack}[1]{\mathop{#1}\limits}

%----------------------------------------------%
%       Adjustable Convergence Arrow           %
%----------------------------------------------%
% 1995/05/09;     cf. p. 359 of the TeXBook

\newcommand{\converges}[2]{\def\convsub{#1}\def\convsup{#2}
\ifx\convsub\@empty
	\ifx\convsup\@empty\rightarrow
	\else
	\mathrel{\vbox{\ialign{##\crcr\noalign{\kern -1pt\nointerlineskip}
	$\hfil\scriptstyle\mathstrut{\ #2\ \,}\hfil$\crcr\noalign{\kern -2pt\nointerlineskip}
	\rightarrowfill\crcr%%%%%\noalign{\kern -1pt\nointerlineskip}
	}}}\fi
\else
	\ifx\convsup\@empty
	\mathrel{\vtop{\ialign{##\crcr
	\rightarrowfill\crcr\noalign{\kern -3pt\nointerlineskip}
	$\hfil\scriptstyle\mathstrut{\ #1\ \,}\hfil$\crcr
	}}}
	\else
\mathrel{\vcenter{\ialign{##\crcr
	$\hfil\scriptstyle\mathstrut{\ #2\ \,}\hfil$\crcr\noalign{\kern -2pt\nointerlineskip}
	\rightarrowfill\crcr\noalign{\kern -3pt\nointerlineskip}
	$\hfil\scriptstyle\mathstrut{\ #1\ \,}\hfil$\crcr
	}}}
	\fi
\fi
}

%----------------------------------------------%
%   Matrix & vector algebra & Jacobians, etc.  %
%----------------------------------------------%

\newcommand{\vect}[2]{#1_1,\ldots,#1_{#2}}
\newcommand{\diff}[4]{\dfrac{\partial #1^{#2}}{\partial #3_{#4}}}
\newcommand{\diffat}[5]{\dfrac{\partial #1^{#2}(#5)}{\partial #3_{#4}}}

\newcommand{\jacobian}[4]{\left[\begin{array}{ccc}
\diff {#1}1{#3}1 &\cdots &\diff {#1}1{#3}{#4}\\
\vdots &&\vdots\\
\diff {#1}{#2}{#3}1 &\cdots&\diff{#1}{#2}{#3}{#4}
\end{array}\right]}

\newcommand{\jacobianat}[5]{\left[\begin{array}{ccc}
\diffat {#1}1{#3}1{#5} &\cdots &\diffat {#1}1{#3}{#4}{#5}\\
\vdots &&\vdots\\
\diffat {#1}{#2}{#3}1{#5} &\cdots&\diffat{#1}{#2}{#3}{#4}{#5}
\end{array}\right]}

\newcommand{\CramerJacobian}[8]{\frac{\left| \begin{array}{ccccccc}
\diff{#1}1{#3}1 & \cdots &\diff{#1}1{#3}{{#6}-1} &\diff{#5}1{#7}{#8} &\diff{#1}1{#3}{{#6}+1} &\cdots &\diff{#1}1{#3}{#4}\\
\vdots &&\vdots&\vdots&\vdots &&\vdots\\
\diff{#1}{#2}{#3}1 &\cdots &\diff{#1}{#2}{#3}{{#6}-1} &\diff{#5}{#2}{#7}{#8} &\diff{#1}{#2}{#3}{{#6}+1} &\cdots &\diff{#1}{#2}{#3}{#4}
\end{array}\right|}
{\left| \begin{array}{ccc}
\diff {#1}1{#3}1 & \cdots & \diff {#1}1{#3}{#4}\\
\vdots &&\vdots\\
\diff {#1}{#2}{#3}1 &\cdots&\diff{#1}{#2}{#3}{#4}
\end{array}\right|}
}

\newcommand{\setcolsep}{\setlength{\arraycolsep}{2.5pt}}

\newcommand{\partition}[4]{{\setcolsep
\left[ \begin{array}{c|c}
#1&#2\\\hline
#3&#4
\end{array}\right]}}

\newcommand{\stackvec}[2]{{\setcolsep
\left[ \begin{array}{c}
#1\\\hline#2\end{array}\right]}}

\newcommand{\catvec}[2]{{\setcolsep
\left[ \begin{array}{c|c}
#1&#2\end{array}\right]}}

%\newcommand{\colvec}[1]{\left[ \begin{array}{@{}c@{}}#1\end{array}\right]}
\newcommand{\colvec}[1]{\begin{bmatrix}#1\end{bmatrix}}

%----------------------------------------------%
%            Commutative triangles             %
%----------------------------------------------%

% Args  = (3 spaces clockwise, 3 functions clockwise,
%		 scale)
\newcommand{\commutes}[7]{\begingroup
\setlength{\unitlength}{#7bp}
\begin{picture}(90,90)
	\put(10,75){\vector(1,0){60}}
	\put(75,70){\vector(0,-1){60}}
	\put(5,70){\vector(1,-1){65}}
	\place(7.5,72.5)[br]{$#1$}
	\place(72.5,72.5)[bl]{$#2$}
	\place(72.5,7.5)[tl]{$#3$}
	\place(40,80)[b]{$#4$}
	\place(80,38)[l]{$#5$}
	\place(32.5,37.5)[tr]{$#6$}
\end{picture}
\endgroup}

%----------------------------------------------%
%            Commutative rectangles            %
%----------------------------------------------%

% Args  = (4 spaces clockwise, 4 functions clockwise,
%		 scale)
\newcommand{\commutesq}[9]{\begingroup
\setlength{\unitlength}{#9bp}
\begin{picture}(90,90)
	\put(10,75){\vector(1,0){60}}
	\put(7.5,8.5){\vector(1,0){60}}
	\put(75,70){\vector(0,-1){60}}
	\put(2.5,70){\vector(0,-1){60}}
	\place(7.5,72.5)[br]{$#1$}
	\place(72.5,72.5)[bl]{$#2$}
	\place(72.5,5)[tl]{$#3$}
	\place(7.5,5)[tr]{$#4$}
	\place(40,80)[b]{$#5$}
	\place(80,38)[l]{$#6$}
	\place(40,5)[t]{$#7$}
	\place(0,38)[r]{$#8$}
\end{picture}
\endgroup}

\newcommand{\minor}[3][A]{#1\left(\begin{array}{c}\scriptstyle#2\\
        \scriptstyle#3\end{array}\right)}
\newcommand{\cof}[2][\alpha]{\mathword{cof}#1_{#2}}
\newcommand{\idfn}[1]{{\boldmath\textbf{#1}}\index{#1}} % indexed defn
